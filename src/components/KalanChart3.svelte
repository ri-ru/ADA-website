<script lang="ts">
  import echarts from '../lib/echarts';
  import { onMount } from 'svelte';

  let chartDiv: HTMLDivElement;

  onMount(() => {
    var chart = echarts.init(chartDiv, "sheNaNigans", {renderer: "svg"});
    var option = {
  "title": [
    {
      "text": "Time Before First Sponsor",
      "textAlign": "center",
      "left": "22.5%"
    },
    {
      "text": "Number of Videos Before First Sponsor",
      "textAlign": "center",
      "left": "77.5%"
    }
  ],
  "animationDuration": 1500.0,
  "animationEasing": "cubicInOut",
  "tooltip": {
    "trigger": "item"
  },
  "grid": [
    {
      "right": "55%",
      bottom: 0
    },
    {
      "left": "55%",
      bottom: 0
    }
  ],
  "xAxis": [
    {
      "type": "log",
      "gridIndex": 0.0,
      "name": "days",
      "axisLabel": {
        "formatter": function(value, index) { return value.toExponential().replace("+",""); }
      }
    },
    {
      "type": "log",
      "gridIndex": 1.0,
      "name": "videos",
      "axisLabel": {
        "formatter": function(value, index) { return value.toExponential().replace("+",""); }
      }
    }
  ],
  "yAxis": [
    {
      "gridIndex": 0.0,
      "name": "channel density"
    },
    {
      "gridIndex": 1.0,
      "name": "channel density"
    }
  ],
  "color": [
    "#f5c2e7",
    "#f5c2e7"
  ],
  "series": [
    {
      "type": "bar",
      "xAxisIndex": 0.0,
      "yAxisIndex": 0.0,
      "emphasis": {
        "focus": "adjacency"
      },
      "barWidth": "100%",
      "tooltip": {
        "trigger": "item",
        "formatter": function(param) { 
                                const chan = Math.round(param.data[1] * 9714);
                                return chan.toString() + " channels";
                                 }
      },
      "data": [
        [
          1.0,
          0.0020588840848260242
        ],
        [
          1.0888080245643683,
          0.0
        ],
        [
          1.1855029143557623,
          0.0
        ],
        [
          1.290785086294999,
          0.0
        ],
        [
          1.4054171599460057,
          0.0
        ],
        [
          1.5302294816096755,
          0.0
        ],
        [
          1.6661261390015882,
          0.0
        ],
        [
          1.8140915100813777,
          0.0
        ],
        [
          1.9751973934706968,
          0.0008235536339304097
        ],
        [
          2.150610772109519,
          0.0
        ],
        [
          2.3416022663874165,
          0.0
        ],
        [
          2.5495553379807308,
          0.0
        ],
        [
          2.7759763110643396,
          0.0006176652254478073
        ],
        [
          3.0225052834874466,
          0.0
        ],
        [
          3.2909280069493336,
          0.0
        ],
        [
          3.5831888222300576,
          0.0
        ],
        [
          3.9014047431734347,
          0.0009264978381717109
        ],
        [
          4.247880791440724,
          0.0
        ],
        [
          4.625126693113501,
          0.0006176652254478073
        ],
        [
          5.035875058088841,
          0.0
        ],
        [
          5.4831011739506845,
          0.0
        ],
        [
          5.9700445576958145,
          0.0005147210212065061
        ],
        [
          6.500232421426038,
          0.0006176652254478073
        ],
        [
          7.077505221982145,
          0.0
        ],
        [
          7.70604447959038,
          0.0006176652254478073
        ],
        [
          8.39040306702796,
          0.0006176652254478073
        ],
        [
          9.13553818870953,
          0.0
        ],
        [
          9.946847288581171,
          0.0006176652254478073
        ],
        [
          10.830207146923511,
          0.00041177681696520483
        ],
        [
          11.792016449264693,
          0.0006176652254478073
        ],
        [
          12.839242135754427,
          0.0006176652254478073
        ],
        [
          13.97946986673438,
          0.0008235536339304097
        ],
        [
          15.220958970056174,
          0.0005147210212065061
        ],
        [
          16.572702268162164,
          0.0005147210212065061
        ],
        [
          18.044491218291075,
          0.0008235536339304097
        ],
        [
          19.646986837656595,
          0.001441218859378217
        ],
        [
          21.391796927351024,
          0.0009264978381717109
        ],
        [
          23.291560154351192,
          0.0009264978381717109
        ],
        [
          25.36003760068129,
          0.00030883261272390367
        ],
        [
          27.612212442875897,
          0.0009264978381717109
        ],
        [
          30.064398483779378,
          0.0011323862466543133
        ],
        [
          32.73435832283982,
          0.0010294420424130121
        ],
        [
          35.64143202087341,
          0.0012353304508956147
        ],
        [
          38.8066771912924,
          0.0020588840848260242
        ],
        [
          42.25302153255821,
          0.0016471072678608193
        ],
        [
          46.00542890674042,
          0.001955939880584723
        ],
        [
          50.09108016718453,
          0.001441218859378217
        ],
        [
          54.5395700451276,
          0.0020588840848260242
        ],
        [
          59.38312152142537,
          0.001441218859378217
        ],
        [
          64.65681923620902,
          0.001441218859378217
        ],
        [
          70.3988636271922,
          0.0026765493102738317
        ],
        [
          76.6508476374995,
          0.0021618282890673254
        ],
        [
          83.45805799737022,
          0.0033971587399629403
        ],
        [
          90.86980326209515,
          0.0033971587399629403
        ],
        [
          98.9397709823546,
          0.0032942145357216387
        ],
        [
          107.72641659414853,
          0.0033971587399629403
        ],
        [
          117.29338684527312,
          0.004735433395099856
        ],
        [
          127.70998082546602,
          0.00597076384599547
        ],
        [
          139.05165193972908,
          0.005353098620547663
        ],
        [
          151.40055446090847,
          0.006691373275684579
        ],
        [
          164.84613862053192,
          0.006485484867201977
        ],
        [
          179.4857985484853,
          0.007103150092649784
        ],
        [
          195.42557775493452,
          0.006897261684167181
        ],
        [
          212.78093726470053,
          0.007514926909614988
        ],
        [
          231.67759196813347,
          0.009367922585958411
        ],
        [
          252.2524212466533,
          0.01019147621988882
        ],
        [
          274.65446046914735,
          0.012456248713197447
        ],
        [
          299.04598054120487,
          0.009985587811406217
        ],
        [
          325.6036633269837,
          0.011117974058060531
        ],
        [
          354.5198814579749,
          0.015853407453160388
        ],
        [
          386.00409179905154,
          0.01595635165740169
        ],
        [
          420.2843526654886,
          0.0167799052913321
        ],
        [
          457.6089757810247,
          0.019765287214329835
        ],
        [
          498.2483249430617,
          0.019765287214329835
        ],
        [
          542.4967744237601,
          0.021721227094914555
        ],
        [
          590.6748412928764,
          0.023574222771257976
        ],
        [
          643.1315071079688,
          0.02645666049001441
        ],
        [
          700.2467457893322,
          0.03283920115297509
        ],
        [
          762.4342759905106,
          0.03160387070207947
        ],
        [
          830.1445579013919,
          0.0343833642165946
        ],
        [
          903.8680561914758,
          0.03541280625900762
        ],
        [
          984.1387927286758,
          0.03654519250566193
        ],
        [
          1071.5382148080723,
          0.035927527280214124
        ],
        [
          1166.6994069104064,
          0.03705991352686844
        ],
        [
          1270.3116764985405,
          0.036751080914144536
        ],
        [
          1383.1255470694261,
          0.03829524397776405
        ],
        [
          1505.958194629174,
          0.039427630224418364
        ],
        [
          1639.6993669707142,
          0.03983940704138357
        ],
        [
          1785.3178286308278,
          0.037780522956557545
        ],
        [
          1943.86837821108,
          0.037780522956557545
        ],
        [
          2116.4994888931474,
          0.03551575046324892
        ],
        [
          2304.461627493244,
          0.03294214535721639
        ],
        [
          2509.1163123153074,
          0.033971587399629403
        ],
        [
          2731.9459754142636,
          0.027794935145151328
        ],
        [
          2974.5647007073794,
          0.023677166975499278
        ],
        [
          3238.729915716105,
          0.02038295243977764
        ],
        [
          3526.3551216283736,
          0.016368128474366892
        ],
        [
          3839.5237538926344,
          0.012456248713197447
        ],
        [
          4180.504273743809,
          0.005764875437512868
        ],
        [
          4551.766599977894,
          0.0030883261272390363
        ]
      ]
    },
    {
      "type": "bar",
      "xAxisIndex": 1.0,
      "yAxisIndex": 1.0,
      "emphasis": {
        "focus": "adjacency"
      },
      "barWidth": "100%",
      "tooltip": {
        "trigger": "item",
        "formatter": function(param) { 
                                const chan = Math.round(param.data[1] * 9714);
                                return chan.toString() + " channels";
                                 }
      },
      "data": [
        [
          1.0,
          0.006485484867201977
        ],
        [
          1.1160053704838566,
          0.0
        ],
        [
          1.24546798694881,
          0.0
        ],
        [
          1.3899489622005896,
          0.0
        ],
        [
          1.551190506514321,
          0.0
        ],
        [
          1.731136935913556,
          0.0
        ],
        [
          1.9319581175224962,
          0.004426600782375952
        ],
        [
          2.1560756347049876,
          0.0
        ],
        [
          2.4061919875001556,
          0.0
        ],
        [
          2.6853231804653985,
          0.0
        ],
        [
          2.996835090884175,
          0.0032942145357216387
        ],
        [
          3.3444840558812157,
          0.0
        ],
        [
          3.732462167861067,
          0.00422071237389335
        ],
        [
          4.1654478244607684,
          0.0
        ],
        [
          4.648662142568515,
          0.005044266007823759
        ],
        [
          5.187931916671454,
          0.0
        ],
        [
          5.7897598807099495,
          0.005250154416306362
        ],
        [
          6.461403120684277,
          0.004426600782375952
        ],
        [
          7.210960583544803,
          0.005044266007823759
        ],
        [
          8.047470737583405,
          0.0
        ],
        [
          8.981020561954763,
          0.009367922585958411
        ],
        [
          10.022867179567458,
          0.004941321803582459
        ],
        [
          11.185573600043666,
          0.005147210212065061
        ],
        [
          12.483160209591176,
          0.005558987029030266
        ],
        [
          13.931273834514137,
          0.009162034177475808
        ],
        [
          15.547376416999006,
          0.008853201564751905
        ],
        [
          17.350955578304948,
          0.009470866790199713
        ],
        [
          19.36375960841516,
          0.01019147621988882
        ],
        [
          21.6100597157497,
          0.0167799052913321
        ],
        [
          24.116942699253503,
          0.009367922585958411
        ],
        [
          26.914637572018346,
          0.018015235742227714
        ],
        [
          30.036880074999058,
          0.01266213712168005
        ],
        [
          33.52131947627849,
          0.019147621988882025
        ],
        [
          37.40997256123189,
          0.01770640312950381
        ],
        [
          41.749730287988505,
          0.01955939880584723
        ],
        [
          46.592923217647694,
          0.02110356186946675
        ],
        [
          51.997952537436795,
          0.026662548898497014
        ],
        [
          58.029994285944134,
          0.02028000823553634
        ],
        [
          64.76178527226119,
          0.027177269919703522
        ],
        [
          72.27450016596582,
          0.027177269919703522
        ],
        [
          80.65873033425423,
          0.03201564751904468
        ],
        [
          90.01557622943687,
          0.027589046736668725
        ],
        [
          100.45786649925051,
          0.02954498661725345
        ],
        [
          112.11151852051387,
          0.026868437306979617
        ],
        [
          125.11705676199382,
          0.030162651842701255
        ],
        [
          139.63130728551863,
          0.03222153592752728
        ],
        [
          155.82928881832044,
          0.03294214535721639
        ],
        [
          173.90632319992557,
          0.02964793082149475
        ],
        [
          194.08039065221823,
          0.02789787934939263
        ],
        [
          216.59475827348038,
          0.02728021412394482
        ],
        [
          241.72091345185683,
          0.025941939468807906
        ],
        [
          269.7618375705357,
          0.028412600370599134
        ],
        [
          301.0556594803116,
          0.02347127856701668
        ],
        [
          335.9797327945869,
          0.025736051060325303
        ],
        [
          374.95518617249047,
          0.025633106856084
        ],
        [
          418.4520014592736,
          0.019971175622812434
        ],
        [
          466.99468091826793,
          0.02295655754581017
        ],
        [
          521.168571892182,
          0.018324068354951616
        ],
        [
          581.6269251590769,
          0.017912291537986413
        ],
        [
          649.0987720955419,
          0.017088737904056003
        ],
        [
          724.3977156331016,
          0.014206300185299567
        ],
        [
          808.4317410127788,
          0.01595635165740169
        ],
        [
          902.2141646398754,
          0.012559192917438749
        ],
        [
          1006.8758530647073,
          0.012456248713197447
        ],
        [
          1123.6788594307277,
          0.011426806670784434
        ],
        [
          1254.0316418238665,
          0.00926497838171711
        ],
        [
          1399.506047032123,
          0.008235536339304097
        ],
        [
          1561.856264512482,
          0.006691373275684579
        ],
        [
          1743.0399791197847,
          0.007000205888408483
        ],
        [
          1945.2419776657487,
          0.0077208153180975915
        ],
        [
          2170.900493965614,
          0.004529544986617253
        ],
        [
          2422.736610051682,
          0.004014823965410748
        ],
        [
          2703.78706808553,
          0.0036030471484455426
        ],
        [
          3017.4408886282517,
          0.0037059913526868438
        ],
        [
          3367.480236826709,
          0.0021618282890673254
        ],
        [
          3758.1260292968605,
          0.0032942145357216387
        ],
        [
          4194.088831650467,
          0.0018529956763434219
        ],
        [
          4680.625660408285,
          0.001955939880584723
        ],
        [
          5223.603374240193,
          0.0011323862466543133
        ],
        [
          5829.56941892965,
          0.0012353304508956147
        ],
        [
          6505.830779133944,
          0.0011323862466543133
        ],
        [
          7260.542088972654,
          0.0008235536339304097
        ],
        [
          8102.80396391756,
          0.0006176652254478073
        ],
        [
          9042.772739709877,
          0.0013382746551369158
        ],
        [
          10091.78294158124,
          0.0008235536339304097
        ],
        [
          11262.483960562035,
          0.0007206094296891085
        ],
        [
          12568.992584975525,
          0.00041177681696520483
        ],
        [
          14027.063226404456,
          0.00030883261272390367
        ],
        [
          15654.277892783984,
          0.0007206094296891085
        ],
        [
          17470.258199393636,
          0.00010294420424130121
        ],
        [
          19496.901974262928,
          0.00020588840848260242
        ],
        [
          21758.647311074732,
          0.0006176652254478073
        ],
        [
          24282.767253623522,
          0.00020588840848260242
        ],
        [
          27099.698665253378,
          0.00030883261272390367
        ],
        [
          30243.409248916967,
          0.0
        ],
        [
          33751.807143532475,
          0.00010294420424130121
        ],
        [
          37667.198035717636,
          0.0
        ],
        [
          42036.79529893985,
          0.00020588840848260242
        ],
        [
          46913.28931154741,
          0.0
        ],
        [
          52355.482818749806,
          0.00020588840848260242
        ]
      ]
    }
  ]
};
    chart.setOption(option);

    const resizeObserver = new ResizeObserver(() => chart.resize());
    resizeObserver.observe(chartDiv);
  });
</script>

<div bind:this={chartDiv} class="echart" style="width: 100%; height: 500px;"></div>
